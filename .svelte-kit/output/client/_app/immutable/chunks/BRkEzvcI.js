import{i as k,j as P,w as D,k as N,o as Q,y as W,a as L,z as X,A as Z,B as $,D as V,v as O,x as b,C as j,E as ee,F as B,G as re,I as A,J as F,K as ne,L as U,m as fe,M as y,N as le,O as ae,P as ie,Q as ue,R as q,T as G,U as z,p as se,V as oe,W as ve}from"./DmOxnaRq.js";function ge(e,l){return l}function te(e,l,a){for(var d=[],g=l.length,u,i=l.length,n=0;n<g;n++){let s=l[n];G(s,()=>{if(u){if(u.pending.delete(s),u.done.add(s),u.pending.size===0){var c=e.outrogroups;H(y(u.done)),c.delete(u),c.size===0&&(e.outrogroups=null)}}else i-=1},!1)}if(i===0){var o=d.length===0&&a!==null;if(o){var f=a,v=f.parentNode;oe(v),v.append(f),e.items.clear()}H(l,!o)}else u={pending:new Set(l),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(u)}function H(e,l=!0){for(var a=0;a<e.length;a++)ve(e[a],l)}var Y;function he(e,l,a,d,g,u=null){var i=e,n=new Map;{var o=e;i=N?D(Q(o)):o.appendChild(k())}N&&W();var f=null,v=X(()=>{var p=a();return le(p)?p:p==null?[]:y(p)}),s,c=!0;function x(){_.fallback=f,de(_,s,i,l,d),f!==null&&(s.length===0?f.f&A?(f.f^=A,S(f,null,i)):q(f):G(f,()=>{f=null}))}var r=P(()=>{s=L(v);var p=s.length;let E=!1;if(N){var h=Z(i)===$;h!==(p===0)&&(i=V(),D(i),O(!1),E=!0)}for(var M=new Set,T=re,C=ne(),m=0;m<p;m+=1){N&&b.nodeType===j&&b.data===ee&&(i=b,E=!0,O(!1));var R=s[m],I=d(R,m),t=c?null:n.get(I);t?(t.v&&B(t.v,R),t.i&&B(t.i,m),C&&T.skipped_effects.delete(t.e)):(t=ce(n,c?i:Y??(Y=k()),R,I,m,g,l,a),c||(t.e.f|=A),n.set(I,t)),M.add(I)}if(p===0&&u&&!f&&(c?f=F(()=>u(i)):(f=F(()=>u(Y??(Y=k()))),f.f|=A)),N&&p>0&&D(V()),!c)if(C){for(const[J,K]of n)M.has(J)||T.skipped_effects.add(K.e);T.oncommit(x),T.ondiscard(()=>{})}else x();E&&O(!0),L(v)}),_={effect:r,items:n,outrogroups:null,fallback:f};c=!1,N&&(i=b)}function de(e,l,a,d,g){var I;var u=l.length,i=e.items,n=e.effect.first,o,f=null,v=[],s=[],c,x,r,_;for(_=0;_<u;_+=1){if(c=l[_],x=g(c,_),r=i.get(x).e,e.outrogroups!==null)for(const t of e.outrogroups)t.pending.delete(r),t.done.delete(r);if(r.f&A)if(r.f^=A,r===n)S(r,null,a);else{var p=f?f.next:n;r===e.effect.last&&(e.effect.last=r.prev),r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),w(e,f,r),w(e,r,p),S(r,p,a),f=r,v=[],s=[],n=f.next;continue}if(r.f&z&&q(r),r!==n){if(o!==void 0&&o.has(r)){if(v.length<s.length){var E=s[0],h;f=E.prev;var M=v[0],T=v[v.length-1];for(h=0;h<v.length;h+=1)S(v[h],E,a);for(h=0;h<s.length;h+=1)o.delete(s[h]);w(e,M.prev,T.next),w(e,f,M),w(e,T,E),n=E,f=T,_-=1,v=[],s=[]}else o.delete(r),S(r,n,a),w(e,r.prev,r.next),w(e,r,f===null?e.effect.first:f.next),w(e,f,r),f=r;continue}for(v=[],s=[];n!==null&&n!==r;)(o??(o=new Set)).add(n),s.push(n),n=n.next;if(n===null)continue}r.f&A||v.push(r),f=r,n=r.next}if(e.outrogroups!==null){for(const t of e.outrogroups)t.pending.size===0&&(H(y(t.done)),(I=e.outrogroups)==null||I.delete(t));e.outrogroups.size===0&&(e.outrogroups=null)}if(n!==null||o!==void 0){var C=[];if(o!==void 0)for(r of o)r.f&z||C.push(r);for(;n!==null;)!(n.f&z)&&n!==e.fallback&&C.push(n),n=n.next;var m=C.length;if(m>0){var R=u===0?a:null;te(e,C,R)}}}function ce(e,l,a,d,g,u,i,n){var o=i&ae?i&ie?U(a):fe(a,!1,!1):null,f=i&ue?U(g):null;return{v:o,i:f,e:F(()=>(u(l,o??a,f??g,n),()=>{e.delete(d)}))}}function S(e,l,a){if(e.nodes)for(var d=e.nodes.start,g=e.nodes.end,u=l&&!(l.f&A)?l.nodes.start:a;d!==null;){var i=se(d);if(u.before(d),d===g)return;d=i}}function w(e,l,a){l===null?e.effect.first=a:l.next=a,a===null?e.effect.last=l:a.prev=l}export{he as e,ge as i};
